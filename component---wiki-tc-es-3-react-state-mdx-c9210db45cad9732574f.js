(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{O166:function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return r})),a.d(t,"default",(function(){return l}));var n=a("wx14"),c=a("zLVn"),s=(a("q1tI"),a("7ljp")),o=a("4xnX"),b=a("WHYo"),r=(a("qKvR"),{}),p={_frontmatter:r},i=b.a;function l(e){var t=e.components,a=Object(c.a)(e,["components"]);return Object(s.b)(i,Object(n.a)({},p,a,{components:t,mdxType:"MDXLayout"}),Object(s.b)(o.a,{mdxType:"Deck"},Object(s.b)(o.c,{mdxType:"Slide"},Object(s.b)("h2",null,"Finding the State"),Object(s.b)("p",null,"There is an obvious true, usually forgotten: all views are derived from the\nstate. It does not matter what there are in the state, where is the state, or\nhow we handle it, but all views derive from it."),Object(s.b)("p",null,Object(s.b)("img",Object(n.a)({parentName:"p"},{src:"/images/view/StateIsEveryWhere.png",alt:"State is Everywhere"}))),Object(s.b)("p",null,"Some times this is not obvious because the state of the view is hidden. Hidden\nin variables inside the classes, hidden in form data, even hidden as pixels on\nthe screen. But once you understand that you can control all the states, then\nyou can control any view.")),Object(s.b)(o.c,{mdxType:"Slide"},Object(s.b)("h2",null,"The source of truth"),Object(s.b)("p",null,"Imagine that you have one single source of truth. A place from where all the\nthings derive. All content of the database, all content of the models, all\nintermediate variables from controllers, all small bits of memory spread across\nviews."),Object(s.b)("p",null,Object(s.b)("img",Object(n.a)({parentName:"p"},{src:"/images/view/StateSingleSourceOfTruth.png",alt:"Single Source of Truth"}))),Object(s.b)("p",null,"It does not matter if it is real or just a logic representation in your head,\nbut it opens a new perspective. Now you know everything inside your program.\nEverything that means something and somehow represents something, is inside that\nsingle source of truth.")),Object(s.b)(o.c,{mdxType:"Slide"},Object(s.b)("h2",null,"Even the pointer has state"),Object(s.b)("p",null,"And then you can realize something very simple: the view itself is created from\nthat state. Everything that you can see on the screen exists to represent\nsomething inside that."),Object(s.b)("div",{style:{textAlign:"center"}},Object(s.b)("p",null,Object(s.b)("img",Object(n.a)({parentName:"p"},{src:"/images/view/TheStateOfTheCursor.png",alt:"Cursor and State"})))),Object(s.b)("p",null,"Even that little thing, the pointer of your mouse, responds to that principle.\nProbably you do not care about that, it is a very low level concept and you only\nneed clicks and the operating system handles it, but somehow, the state is here.\nTwo small integers, x and y describes its position on the screen."),Object(s.b)("p",null,"These two integers exists in the memory of your computer, they are the source of\ntruth for the position of the your pointer. When you move the cursor, some thing\nawakes inside your computer, gets the movement, and saves the new position in\nthose x and y. And later, some other process reads those variables and paints\nthe cursor on the screen."),Object(s.b)("p",null,"The cursor is drawn in the position in which is drawn because there is where its\nx and y says to draw it. The state mandates the view.")),Object(s.b)(o.c,{mdxType:"Slide"},Object(s.b)("h2",null,"View is a function of the state"),Object(s.b)("p",null,"This is the most pure way of conceive the view, and the most powerful too. Views\nare not complex things to create or maintain, they are the simple conclusion of\ncomputing the whole state of your application."),Object(s.b)("p",null,Object(s.b)("img",Object(n.a)({parentName:"p"},{src:"/images/view/ViewIsFunction-wide.jpg",alt:"f(state) = view"})))),Object(s.b)(o.c,{mdxType:"Slide"},Object(s.b)(o.b,{mdxType:"ShowWhenPresenting"},Object(s.b)("small",null,Object(s.b)("p",null,"View is a function of the state"))),Object(s.b)("h3",null,"Stepping through view"),Object(s.b)("p",null,"Let's start with a simple shopping application. Some users, some products, a\ncart, the current user, the current view, all of them are state. And the view\nshows them."),Object(s.b)("p",null,Object(s.b)("img",Object(n.a)({parentName:"p"},{src:"/images/view/ViewAndState-001.png",alt:"State-View-001"})))),Object(s.b)(o.c,{mdxType:"Slide"},Object(s.b)(o.b,{mdxType:"ShowWhenPresenting"},Object(s.b)("small",null,Object(s.b)("p",null,"View is a function of the state"))),Object(s.b)("h3",null,"Change current user"),Object(s.b)("p",null,"What means changing the current user? It is changing the state of the current\nuser. Imagine that we change to the user ",Object(s.b)("code",Object(n.a)({parentName:"p"},{className:"language-text"}),"u2"),". It changes the salute, the amount\nof items in the cart, and even the possibility of buying more."),Object(s.b)("p",null,Object(s.b)("img",Object(n.a)({parentName:"p"},{src:"/images/view/ViewAndState-002.png",alt:"State-View-002"}))),Object(s.b)("p",null,"If the view shows that is in the state, we can forget about touching anything\nelse but the state. The view will update itself.")),Object(s.b)(o.c,{mdxType:"Slide"},Object(s.b)(o.b,{mdxType:"ShowWhenPresenting"},Object(s.b)("small",null,Object(s.b)("p",null,"View is a function of the state"))),Object(s.b)("h3",null,"Change the current view"),Object(s.b)("p",null,"Yes. The url in the browser is also part of the state. It is one record more in\nour concept of unified state of all the things. And if you change what is\nwriting in the memory position of the current url, the view updates to show the\ncurrent view."),Object(s.b)("p",null,"So if we want to show the page of the product ",Object(s.b)("code",Object(n.a)({parentName:"p"},{className:"language-text"}),"p1"),", we just change that in the\ncurrentView state, and suddenly the view mutates to show the product page with\nall the details."),Object(s.b)("p",null,Object(s.b)("img",Object(n.a)({parentName:"p"},{src:"/images/view/ViewAndState-003.png",alt:"State-View-003"})))),Object(s.b)(o.c,{mdxType:"Slide"},Object(s.b)(o.b,{mdxType:"ShowWhenPresenting"},Object(s.b)("small",null,Object(s.b)("p",null,"View is a function of the state"))),Object(s.b)("h3",null,"Going to the cart"),Object(s.b)("p",null,"It is one more change of the currentView state. We write that the current view\nis the cart, and the view computes the new view that it is the cart."),Object(s.b)("p",null,Object(s.b)("img",Object(n.a)({parentName:"p"},{src:"/images/view/ViewAndState-004.png",alt:"State-View-004"})))),Object(s.b)(o.c,{mdxType:"Slide"},Object(s.b)(o.b,{mdxType:"ShowWhenPresenting"},Object(s.b)("small",null,Object(s.b)("p",null,"View is a function of the state"))),Object(s.b)("h3",null,"Changing user"),Object(s.b)("p",null,"We can go back the to ",Object(s.b)("code",Object(n.a)({parentName:"p"},{className:"language-text"}),"u1")," by changing the currentUser again. And the new view\ncomputed from the unified state is the cart, but now with the three items of the\ncurrent user. And the view computed itself automatically."),Object(s.b)("p",null,Object(s.b)("img",Object(n.a)({parentName:"p"},{src:"/images/view/ViewAndState-005.png",alt:"State-View-005"})))),Object(s.b)(o.c,{mdxType:"Slide"},Object(s.b)(o.b,{mdxType:"ShowWhenPresenting"},Object(s.b)("small",null,Object(s.b)("p",null,"View is a function of the state"))),Object(s.b)("h3",null,"And changing prices"),Object(s.b)("p",null,"We do not care if we are in the catalog, or in the product view, or in the cart.\nWe just change the value in the state of the price of one product, and\neverything updates. Even the total value of the cart."),Object(s.b)("p",null,Object(s.b)("img",Object(n.a)({parentName:"p"},{src:"/images/view/ViewAndState-006.png",alt:"State-View-006"})))),Object(s.b)(o.c,{mdxType:"Slide"},Object(s.b)(o.b,{mdxType:"ShowWhenPresenting"},Object(s.b)("small",null,Object(s.b)("p",null,"View is a function of the state"))),Object(s.b)("h3",null,"Closing the loop"),Object(s.b)("p",null,"And if we return to the cart, just changing the state for the currentView, we\ncan check that the catalog is updated by itself."),Object(s.b)("p",null,Object(s.b)("img",Object(n.a)({parentName:"p"},{src:"/images/view/ViewAndState-007.png",alt:"State-View-007"})))),Object(s.b)(o.c,{mdxType:"Slide"},Object(s.b)("h2",null,"Our state is Redux"),Object(s.b)("p",null,"Instead of having a miscellanea of states spread across multiple components,\nabstractions, and levels, we have decided to have a single source of truth. A\nplace in which we can select everything that we need."),Object(s.b)("p",null,"Usually that place has been databases, but databases are slow for UI and we need\nsome intermediate memory which can destroy the single source of truth. So we\nneed to choose a fast memory to query all the state. We use redux."),Object(s.b)("p",null,"The Redux store becomes our source of truth."),Object(s.b)("p",null,Object(s.b)("img",Object(n.a)({parentName:"p"},{src:"/images/redux/redux-overview-minimal.png",alt:"Redux Overview"}))),Object(s.b)("p",null,"We dispatch actions that will mutate the state, and we read the conclusion. And\nwe will paint views as a result of a function with React."),Object(s.b)("div",{className:"gatsby-highlight","data-language":"json"},Object(s.b)("pre",Object(n.a)({parentName:"div"},{className:"language-json"}),Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"users"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"id"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"u1"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"name"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"mary"')," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"id"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"u2"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"name"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"john"')," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"products"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"id"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"p1"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"name"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"oranges"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"price"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"0.95")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"carts"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"id"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"c1"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"user"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"u1"')," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"cartLines"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"cart"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"c1"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"product"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"p1"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"quantity"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"3")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"currentUser"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"u1"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),","),"\n  ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),'"currentView"'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token operator"}),":")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"/cart"'),"\n",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}")))))))}l.isMDXComponent=!0},WHYo:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("q1tI"),c=a.n(n),s=a("7ljp"),o=a("eC7B"),b=a("qKvR"),r=a("8rN0");var p={name:"1dj59mw",styles:"margin-bottom:-4.5em;.prev{margin-right:0.3em;}.next{margin-left:0.3em;}"};function i(e){var t=e.index,a=e.prev,n=e.next;return Object(b.a)(c.a.Fragment,null,t&&Object(b.a)("div",{css:p},a&&Object(b.a)(r.Link,{className:"prev",to:"/"+a},"«"),Object(b.a)(r.Link,{className:"index",to:"/"+t},t),n&&Object(b.a)(r.Link,{className:"next",to:"/"+n},"»")))}var l={name:"ix6qzk",styles:'display:grid;grid-template-areas:"prev index next";grid-gap:0.5em;.prev{grid-area:prev;text-align:left;}.next{grid-area:next;text-align:right;}.index{grid-area:index;text-align:center;}'};function m(e){var t=e.prev,a=e.next,n=e.index;return n===t?Object(b.a)("div",{css:l},n&&Object(b.a)(r.Link,{className:"prev",to:"/"+n},"← Index"),a&&Object(b.a)(r.Link,{className:"next",to:"/"+a},a.replace(n,"")," →")):Object(b.a)("div",{css:l},n&&Object(b.a)(r.Link,{className:"index",to:"/"+n},n),t&&Object(b.a)(r.Link,{className:"prev",to:"/"+t},"← ",t.replace(n,"")),a&&Object(b.a)(r.Link,{className:"next",to:"/"+a},a.replace(n,"")," →"))}var j=a("m8Tn");function u(e){var t=e.children,a=e.pageContext.frontmatter,n=a.title,c=a.index,p=a.prev,l=a.next;return Object(b.a)(j.a,{title:n},Object(b.a)(s.a,{components:r},Object(b.a)(o.a,null,Object(b.a)(r.Container,null,Object(b.a)(i,{index:c,prev:p,next:l}),n&&Object(b.a)("h1",null,n),t,Object(b.a)(m,{index:c,prev:p,next:l})))))}}}]);
//# sourceMappingURL=component---wiki-tc-es-3-react-state-mdx-c9210db45cad9732574f.js.map