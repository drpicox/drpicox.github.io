(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48,974],{28963:(e,t,r)=>{Promise.resolve().then(r.bind(r,49119))},49119:(e,t,r)=>{"use strict";r.d(t,{ContentView:()=>j});var n=r(95155),l=r(12115);let a=["⠋","⠙","⠹","⠸","⠼","⠴","⠦","⠧","⠇","⠏"];function u(){var e;let[t,r]=(0,l.useState)(-1);return(0,l.useEffect)(()=>{let e=setInterval(()=>{r(e=>(e+1)%a.length)},200);return()=>clearInterval(e)},[]),(0,n.jsx)("pre",{children:null!==(e=a[t])&&void 0!==e?e:""})}var s=r(46446),i=r(14096),c=r(86266),o=r(63169),h=r(83893),v=new WeakMap,d=new WeakMap,m=new WeakMap,f=new WeakSet;class g{addCommand(e){(0,c._)(this,m,(0,s._)(this,v).length-1),(0,s._)(this,v)[(0,s._)(this,m)]=e,(0,s._)(this,v).push(""),(0,c._)(this,m,(0,s._)(this,v).length-1),(0,c._)(this,d,(0,s._)(this,v).slice())}getPreviousCommand(e){return(0,o._)(this,f,p).call(this,(0,s._)(this,m)-1,e)}getNextCommand(e){return(0,o._)(this,f,p).call(this,(0,s._)(this,m)+1,e)}debug(){return"CommandHistory: ".concat(JSON.stringify((0,s._)(this,v)),", CurrentIndex: ").concat((0,s._)(this,m),", TemporaryCommands: ").concat(JSON.stringify((0,s._)(this,d)))}constructor(){(0,h._)(this,f),(0,i._)(this,v,{writable:!0,value:void 0}),(0,i._)(this,d,{writable:!0,value:void 0}),(0,i._)(this,m,{writable:!0,value:void 0}),(0,c._)(this,v,[""]),(0,c._)(this,d,[""]),(0,c._)(this,m,0)}}function p(e,t){return e>=0&&e<(0,s._)(this,v).length?((0,s._)(this,d)[(0,s._)(this,m)]=t,(0,c._)(this,m,e),(0,s._)(this,d)[e]):t}var _=r(22812);function C(e){let t=_.z.getInstance().resolve(e),[,r]=(0,l.useReducer)(e=>e+1,0);return(0,l.useEffect)(()=>{if("function"==typeof t.subscribe)return t.subscribe(r)},[t]),t}function b(e){setTimeout(()=>{e.setSelectionRange(e.value.length,e.value.length)},0)}var k=r(39114),x=r(94710);function y(e){let{onCommand:t}=e,[r,a]=(0,l.useState)(!1),[s,i]=(0,l.useState)(""),c=(0,l.useRef)(null),o=function(e){let t=C(g),r=(0,l.useCallback)(()=>{var r;if(!e.current)return;let n=null===(r=e.current)||void 0===r?void 0:r.value;t.addCommand(n)},[e,t]),n=(0,l.useCallback)(()=>{var r;if(!e.current)return;let n=null===(r=e.current)||void 0===r?void 0:r.value,l=t.getPreviousCommand(n);l!==n&&(e.current.value=l,b(e.current))},[e,t]),a=(0,l.useCallback)(()=>{var r;if(!e.current)return;let n=null===(r=e.current)||void 0===r?void 0:r.value,l=t.getNextCommand(n);l!==n&&(e.current.value=l,b(e.current))},[e,t]);return(0,l.useMemo)(()=>({addCommand:r,getPreviousCommand:n,getNextCommand:a}),[r,n,a])}(c),h=function(e){let[t,r]=(0,l.useState)(""),n=C(k.$),a=(0,l.useRef)(0),u=(0,l.useCallback)(()=>{var t,l,u,s;if(!e.current||(u=e.current).selectionStart!==u.value.length)return;let i=e.current.value,c=null!==(t=i.split(" ").pop())&&void 0!==t?t:"",o=n.getDirectory(),h=null!==(l=null==o?void 0:o.complete(c))&&void 0!==l?l:"",v=h.length>c.length;if(v&&(e.current.value="".concat(i).concat(h.slice(c.length)),s=e.current,setTimeout(()=>{s.setSelectionRange(s.value.length,s.value.length)},0)),!v){let e=Date.now();if(a.current+500>e){let e=null==o?void 0:o.getCompletions(c);e?r(e.join(", ")):r("No completions")}a.current=e}},[e,n]),s=(0,l.useCallback)(()=>{r("")},[]);return(0,l.useMemo)(()=>({hint:t,clearHint:s,completeCommand:u}),[t,s,u])}(c),v=C(k.$).getPath(),d=C(x.$).isRunning(),m=(0,l.useCallback)(e=>{if(h.clearHint(),"Enter"===e.key){let r=e.currentTarget.value;""!==r.trim()&&(o.addCommand(),t(r)),e.currentTarget.value="",a(!0)}if("ArrowUp"===e.key&&o.getPreviousCommand(),"ArrowDown"===e.key&&o.getNextCommand(),"Tab"!==e.key||(e.preventDefault(),h.completeCommand(),r||e.currentTarget.value||(e.currentTarget.value="help")),e.ctrlKey&&"u"===e.key){e.preventDefault();let t=e.currentTarget.value;t&&i(t),e.currentTarget.value=""}e.ctrlKey&&"y"===e.key&&(e.preventDefault(),e.currentTarget.value+=s)},[t,o,h,r,s]);return((0,l.useEffect)(()=>{d&&c.current&&c.current.focus({preventScroll:!0})},[d]),d)?(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsxs)("div",{className:"flex",children:[v,(0,n.jsx)("span",{className:"prompt whitespace-pre",children:"$ "}),(0,n.jsx)("input",{ref:c,"data-ref":"prompt",type:"text",placeholder:r?"":"help",className:"command text-light-gray border-none outline-none flex-1",onKeyDown:m})]}),h.hint&&(0,n.jsx)("div",{className:"hint",children:h.hint})]}):(0,n.jsx)(u,{})}var w=r(13632),N=r(84586);function j(e){let{initialCommands:t,initialPath:r}=e,a=C(w.f),u=(0,N.l)(),s=(0,l.useRef)(null),i=(0,l.useCallback)(e=>u([x.$],async t=>{await t.executeCommand(e),setTimeout(()=>{s.current&&s.current.scrollIntoView({behavior:"smooth"})},0)}),[u]);return(0,l.useEffect)(()=>{u([k.$,x.$],async(e,n)=>{for(let l of(a.clear(),r&&e.changePath(r),t))await n.executeCommand(l)})},[u,a,t,r]),(0,n.jsxs)(n.Fragment,{children:[a.getContent().map((e,t)=>(0,n.jsx)("div",{className:"output",children:e},t)),(0,n.jsx)(y,{onCommand:i}),(0,n.jsx)("div",{ref:s})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[804,458,723,992,441,684,358],()=>t(28963)),_N_E=e.O()}]);