(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{470:function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return s})),t.d(a,"default",(function(){return b}));t(39),t(8),t(7),t(2),t(16),t(1),t(0);var n=t(96),c=t(468);function o(){return(o=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var s={},p={_frontmatter:s},r=c.a;function b(e){var a=e.components,t=function(e,a){if(null==e)return{};var t,n,c={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(c[t]=e[t]);return c}(e,["components"]);return Object(n.b)(r,o({},p,t,{components:a,mdxType:"MDXLayout"}),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"source"),": ",Object(n.b)("a",o({parentName:"li"},{href:"https://github.com/angular/angular.js/pull/14404",target:"_blank",rel:"nofollow noopener noreferrer"}),"https://github.com/angular/angular.js/pull/14404"))),Object(n.b)("div",{className:"gatsby-highlight","data-language":"javascript"},Object(n.b)("pre",o({parentName:"div"},{className:"language-javascript"}),Object(n.b)("code",o({parentName:"pre"},{className:"language-javascript"}),Object(n.b)("span",o({parentName:"code"},{className:"token function"}),"it"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),Object(n.b)("span",o({parentName:"code"},{className:"token string"}),"'should not copy verylargeobject'"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.b)("span",o({parentName:"code"},{className:"token function"}),"inject"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),Object(n.b)("span",o({parentName:"code"},{className:"token keyword"}),"function"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),Object(n.b)("span",o({parentName:"code"},{className:"token parameter"}),"$rootScope",Object(n.b)("span",o({parentName:"span"},{className:"token punctuation"}),",")," $compile"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.b)("span",o({parentName:"code"},{className:"token keyword"}),"var")," getProp ",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"=")," jasmine",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"."),Object(n.b)("span",o({parentName:"code"},{className:"token function"}),"createSpy"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),Object(n.b)("span",o({parentName:"code"},{className:"token string"}),"'getProp'"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),")"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(n.b)("span",o({parentName:"code"},{className:"token keyword"}),"var")," verylargeobject ",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),";"),"\n  Object",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"."),Object(n.b)("span",o({parentName:"code"},{className:"token function"}),"defineProperty"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),"verylargeobject",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.b)("span",o({parentName:"code"},{className:"token string"}),"'prop'"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(n.b)("span",o({parentName:"code"},{className:"token keyword"}),"get"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),":")," getProp",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),","),"\n    enumerable",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),":")," ",Object(n.b)("span",o({parentName:"code"},{className:"token boolean"}),"true"),"\n  ",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),")"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),";"),"\n  element ",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.b)("span",o({parentName:"code"},{className:"token function"}),"$compile"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),Object(n.b)("span",o({parentName:"code"},{className:"token string"}),"'<div ng-class=\"{foo: verylargeobject}\"></div>'"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),")"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),"$rootScope",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),")"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),";"),"\n  $rootScope",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"."),"verylargeobject ",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"=")," verylargeobject",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),";"),"\n  $rootScope",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"."),Object(n.b)("span",o({parentName:"code"},{className:"token function"}),"$digest"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),")"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),";"),"\n\n  ",Object(n.b)("span",o({parentName:"code"},{className:"token function"}),"expect"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),"getProp",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),")"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"."),"not",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"."),Object(n.b)("span",o({parentName:"code"},{className:"token function"}),"toHaveBeenCalled"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"("),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),")"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),")"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),")"),Object(n.b)("span",o({parentName:"code"},{className:"token punctuation"}),";")))),Object(n.b)("p",null,"Although this PR was not accepted as it,\n@gkalpak (part of AngularJS core )\nused it as base for ",Object(n.b)("a",o({parentName:"p"},{href:"https://github.com/angular/angular.js/commit/1d3b65adc2c22ff662159ef910089cf10d1edb7b",target:"_blank",rel:"nofollow noopener noreferrer"}),"full ngClass refactor"),".\nAs he explains:"),Object(n.b)("blockquote",null,Object(n.b)("p",{parentName:"blockquote"}," In large based on #14404. Kudos to @drpicox for the initial idea and a big part\nof the implementation.")),Object(n.b)("p",null,"The reason behind of being implemented by him was to refactor everything\nquickly with multiple commits avoiding the PR proposal/accept delays."),Object(n.b)("div",{className:"gatsby-highlight","data-language":"text"},Object(n.b)("pre",o({parentName:"div"},{className:"language-text"}),Object(n.b)("code",o({parentName:"pre"},{className:"language-text"}),"blabla"))),Object(n.b)("div",{className:"gatsby-highlight","data-language":"javascript"},Object(n.b)("pre",o({parentName:"div"},{className:"language-javascript"}),Object(n.b)("code",o({parentName:"pre"},{className:"language-javascript"}),"a ",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.b)("span",o({parentName:"code"},{className:"token number"}),"3")))),Object(n.b)("p",null,"Before this PR there was some tricks that have to be done in the\nngClass expressions to make sure that they are fast enough:"),Object(n.b)("div",{className:"gatsby-highlight","data-language":"javascript"},Object(n.b)("pre",o({parentName:"div"},{className:"language-javascript"}),Object(n.b)("code",o({parentName:"pre"},{className:"language-javascript"}),"    ",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"<"),"i ",Object(n.b)("span",o({parentName:"code"},{className:"token keyword"}),"class"),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"="),Object(n.b)("span",o({parentName:"code"},{className:"token string"}),'"icon"')," ng",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"-"),Object(n.b)("span",o({parentName:"code"},{className:"token keyword"}),"class"),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"="),Object(n.b)("span",o({parentName:"code"},{className:"token string"}),'"{friendly: !!user.friends, male: user.isMale}"'),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),">"),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"..."),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"<"),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"/"),"i",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),">"),"\n    ",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"<"),"td ng",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"-"),Object(n.b)("span",o({parentName:"code"},{className:"token keyword"}),"class"),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"="),Object(n.b)("span",o({parentName:"code"},{className:"token string"}),"\"todo.completed && 'completed'\""),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),">"),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"..."),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"<"),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"/"),"td",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),">")))),Object(n.b)("p",null,"After this PR, the performances is good not matters the syntax:"),Object(n.b)("div",{className:"gatsby-highlight","data-language":"javascript"},Object(n.b)("pre",o({parentName:"div"},{className:"language-javascript"}),Object(n.b)("code",o({parentName:"pre"},{className:"language-javascript"}),"    ",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"<"),"i ",Object(n.b)("span",o({parentName:"code"},{className:"token keyword"}),"class"),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"="),Object(n.b)("span",o({parentName:"code"},{className:"token string"}),'"icon"')," ng",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"-"),Object(n.b)("span",o({parentName:"code"},{className:"token keyword"}),"class"),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"="),Object(n.b)("span",o({parentName:"code"},{className:"token string"}),'"{friendly: user.friends, male: user.isMale}"'),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),">"),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"..."),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"<"),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"/"),"i",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),">"),"\n    ",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"<"),"td ng",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"-"),Object(n.b)("span",o({parentName:"code"},{className:"token keyword"}),"class"),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"="),Object(n.b)("span",o({parentName:"code"},{className:"token string"}),'"{completed: todo.completed}"'),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),">"),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"..."),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"<"),Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),"/"),"td",Object(n.b)("span",o({parentName:"code"},{className:"token operator"}),">")))),Object(n.b)("p",null,"I have also created a ",Object(n.b)("a",o({parentName:"p"},{href:"../angularjs-ngclass-benchpress"}),"PR with benchpress"),"\nto make sure that performance improvements are good."))}b.isMDXComponent=!0}}]);
//# sourceMappingURL=component---wiki-angular-js-ng-class-performance-mdx-155937c5cadf3a48354b.js.map