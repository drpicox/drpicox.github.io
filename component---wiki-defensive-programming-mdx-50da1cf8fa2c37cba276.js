(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{wxSF:function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return p})),t.d(a,"default",(function(){return i}));t("E5k/"),t("rzGZ"),t("Dq+y"),t("8npG"),t("Ggvi"),t("q1tI");var n=t("7ljp"),s=t("WHYo");t("qKvR");function c(){return(c=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var o,p={},r=(o="Link",function(e){return console.warn("Component "+o+" was not imported, exported, or provided by MDXProvider as global scope"),Object(n.b)("div",e)}),m={_frontmatter:p},b=s.a;function i(e){var a=e.components,t=function(e,a){if(null==e)return{};var t,n,s={},c=Object.keys(e);for(n=0;n<c.length;n++)t=c[n],a.indexOf(t)>=0||(s[t]=e[t]);return s}(e,["components"]);return Object(n.b)(b,c({},m,t,{components:a,mdxType:"MDXLayout"}),Object(n.b)("p",null,Object(n.b)("em",{parentName:"p"},"Defensive programming is a technique that consists of anticipating possible\npoints of failure of usage of your code and write the code in the way that\neither it is impossible to misuse it or to fail as fast as possible.")),Object(n.b)("h3",null,"Example"),Object(n.b)("p",null,"This is a example of factorial with defensive programming."),Object(n.b)("div",{className:"gatsby-highlight","data-language":"javascript"},Object(n.b)("pre",c({parentName:"div"},{className:"language-javascript"}),Object(n.b)("code",c({parentName:"pre"},{className:"language-javascript"}),Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"function")," ",Object(n.b)("span",c({parentName:"code"},{className:"token function"}),"factorial"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.b)("span",c({parentName:"code"},{className:"token parameter"}),"n"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(n.b)("span",c({parentName:"code"},{className:"token comment"}),"// defensives ifs"),"\n    ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"if")," ",Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"typeof")," n ",Object(n.b)("span",c({parentName:"code"},{className:"token operator"}),"!==")," ",Object(n.b)("span",c({parentName:"code"},{className:"token string"}),"'number'"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"\n        ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"throw")," ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"new")," ",Object(n.b)("span",c({parentName:"code"},{className:"token class-name"}),"Error"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.b)("span",c({parentName:"code"},{className:"token template-string"}),Object(n.b)("span",c({parentName:"span"},{className:"token template-punctuation string"}),"`"),Object(n.b)("span",c({parentName:"span"},{className:"token string"}),"Illegal argument: expected a number"),Object(n.b)("span",c({parentName:"span"},{className:"token template-punctuation string"}),"`")),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),")"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"if")," ",Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"n ",Object(n.b)("span",c({parentName:"code"},{className:"token operator"}),"<")," ",Object(n.b)("span",c({parentName:"code"},{className:"token number"}),"0"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),")")," \n        ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"throw")," ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"new")," ",Object(n.b)("span",c({parentName:"code"},{className:"token class-name"}),"Error"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.b)("span",c({parentName:"code"},{className:"token template-string"}),Object(n.b)("span",c({parentName:"span"},{className:"token template-punctuation string"}),"`"),Object(n.b)("span",c({parentName:"span"},{className:"token string"}),"Illegal argument: expected a positive number"),Object(n.b)("span",c({parentName:"span"},{className:"token template-punctuation string"}),"`")),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),")"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"if")," ",Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"Math",Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"."),Object(n.b)("span",c({parentName:"code"},{className:"token function"}),"floor"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"n",Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.b)("span",c({parentName:"code"},{className:"token operator"}),"!==")," n",Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"\n        ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"throw")," ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"new")," ",Object(n.b)("span",c({parentName:"code"},{className:"token class-name"}),"Error"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.b)("span",c({parentName:"code"},{className:"token template-string"}),Object(n.b)("span",c({parentName:"span"},{className:"token template-punctuation string"}),"`"),Object(n.b)("span",c({parentName:"span"},{className:"token string"}),"Illegal argument: expected a valid integer, no decimal"),Object(n.b)("span",c({parentName:"span"},{className:"token template-punctuation string"}),"`")),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),")"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"if")," ",Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"arguments",Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"."),"length ",Object(n.b)("span",c({parentName:"code"},{className:"token operator"}),">")," ",Object(n.b)("span",c({parentName:"code"},{className:"token number"}),"1"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"\n        ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"throw")," ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"new")," ",Object(n.b)("span",c({parentName:"code"},{className:"token class-name"}),"Error"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.b)("span",c({parentName:"code"},{className:"token template-string"}),Object(n.b)("span",c({parentName:"span"},{className:"token template-punctuation string"}),"`"),Object(n.b)("span",c({parentName:"span"},{className:"token string"}),"Illegal arguments: factorial has only one argument"),Object(n.b)("span",c({parentName:"span"},{className:"token template-punctuation string"}),"`")),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),")"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"if")," ",Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"n ",Object(n.b)("span",c({parentName:"code"},{className:"token operator"}),">")," ",Object(n.b)("span",c({parentName:"code"},{className:"token constant"}),"MAX_SAFE_FACTORIAL_INPUT"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),")"),"\n        ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"throw")," ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"new")," ",Object(n.b)("span",c({parentName:"code"},{className:"token class-name"}),"Error"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"("),Object(n.b)("span",c({parentName:"code"},{className:"token template-string"}),Object(n.b)("span",c({parentName:"span"},{className:"token template-punctuation string"}),"`"),Object(n.b)("span",c({parentName:"span"},{className:"token string"}),"Illegal argument: the specified number is too big and the result overflows"),Object(n.b)("span",c({parentName:"span"},{className:"token template-punctuation string"}),"`")),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),")"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n\n    ",Object(n.b)("span",c({parentName:"code"},{className:"token comment"}),"// factorial implementation"),"\n    ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"if")," ",Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"n ",Object(n.b)("span",c({parentName:"code"},{className:"token operator"}),"===")," ",Object(n.b)("span",c({parentName:"code"},{className:"token number"}),"0"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"return")," ",Object(n.b)("span",c({parentName:"code"},{className:"token number"}),"1"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(n.b)("span",c({parentName:"code"},{className:"token keyword"}),"return")," n ",Object(n.b)("span",c({parentName:"code"},{className:"token operator"}),"*")," ",Object(n.b)("span",c({parentName:"code"},{className:"token function"}),"factorial"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"("),"n ",Object(n.b)("span",c({parentName:"code"},{className:"token operator"}),"-")," ",Object(n.b)("span",c({parentName:"code"},{className:"token number"}),"1"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),")"),Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.b)("span",c({parentName:"code"},{className:"token punctuation"}),"}")))),Object(n.b)("h3",null,"Defensive programming failure"),Object(n.b)("p",null,"The problem of defensive programming is that you end quickly in the path\nof the overengineering. It is straightforward to anticipate tens, hundreds,\nor infinite, illegal cases, but almost impossible to cover all of them."),Object(n.b)("p",null,"The continuous act of anticipation and adding cases it has two significant problems: it complicates the initial creation of code, and it makes a rigid system hard to change. The first is easy to understand; you have to add tons of tests and checks. The second is more subtle, and it is the main reason why I stopped using defensive programming. Defensive programming is checking for almost everything that you do; as a consecuence, it restricts the ways of usage. One improvement may undo and reconstruct lots of defenses."),Object(n.b)("h3",null,"Alternative"),Object(n.b)("p",null,"It is ",Object(n.b)(r,{to:"/Testing",mdxType:"Link"},"[Testing]"),". It is more reliable and has better results."),Object(n.b)("p",null,"Note that in testing, ",Object(n.b)("code",c({parentName:"p"},{className:"language-text"}),"null")," is a valid ",Object(n.b)("a",c({parentName:"p"},{href:"https://github.com/drpicox/drpicox.github.io/new/master?filename=_entries/TestingDoubles.md"}),"[TestingDoubles]"),".\nThrowing a null error when an argument is not used,\nmakes the construction of the test more difficult and their understanding."),Object(n.b)("h3",null,"¿When to use defensive programming?"),Object(n.b)("p",null,"You may consider defensive programming when interacting with external actors. If you are writing a library or an API, be sure to check all possible usages and fail fast when usages are illegal. If you are interacting with the user, do not trust them, and add the required code to avoid unexpected inputs."))}i.isMDXComponent=!0}}]);
//# sourceMappingURL=component---wiki-defensive-programming-mdx-50da1cf8fa2c37cba276.js.map