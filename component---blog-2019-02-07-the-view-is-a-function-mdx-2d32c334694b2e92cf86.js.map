{"version":3,"sources":["webpack:///./src/layouts/PostLayout.js","webpack:///./blog/2019-02-07-the-view-is-a-function.mdx"],"names":["SOURCE","WikiPage","children","pageContext","canonical","frontmatter","components","shared","title","class","href","target","rel","match","computeSource","name","_frontmatter","Mermaid","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---blog-2019-02-07-the-view-is-a-function-mdx-2d32c334694b2e92cf86.js","sourcesContent":["import React from \"react\"\nimport { MDXProvider } from \"@mdx-js/react\"\nimport Main from \"../components/Main\"\nimport BasicLayout from \"./BasicLayout\"\nimport * as shared from \"../shared\"\n\nconst SOURCE = /\\/\\/(?:.*\\.)?([^.]+\\.[^./]+)\\//\nfunction computeSource(canonical) {\n  const match = canonical.match(SOURCE)\n  if (match) {\n    return `at ${match[1]}`\n  }\n  return \"here\"\n}\n\nexport default function WikiPage({ children, pageContext }) {\n  const { canonical } = pageContext.frontmatter\n\n  return (\n    <BasicLayout {...pageContext.frontmatter}>\n      <MDXProvider components={shared}>\n        <Main>\n          <shared.Container>\n            <h1>{pageContext.frontmatter.title}</h1>\n            {canonical && (\n              <p class=\"small\">\n                <a href={canonical} target=\"_blank\" rel=\"noopener noreferrer\">\n                  This article was originally published{\" \"}\n                  {computeSource(canonical)} ⬈\n                </a>\n              </p>\n            )}\n            {children}\n          </shared.Container>\n        </Main>\n      </MDXProvider>\n    </BasicLayout>\n  )\n}\n","import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Volumes/Projects/drpicox/gatsby-home/src/layouts/PostLayout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst Mermaid = makeShortcode(\"Mermaid\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`After many years, decades, many applications, many programs, many screens, I finally realized a simple and powerful truth: views are just functions.`}</p>\n    <h2>{`My firsts programs in BASIC`}</h2>\n    <p>{`When I was just a child a created my first views with just print:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"basic\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-basic\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-basic\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token number\"\n          }}>{`10`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`PRINT`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"Good morning Dave\"`}</span></code></pre></div>\n    <p>{`After print, it came input. Input is an operation to mutate the program state:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"basic\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-basic\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-basic\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token number\"\n          }}>{`10`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`PRINT`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"Hi\"`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token number\"\n          }}>{`20`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`INPUT`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"What is your name? \"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` N$\n`}<span parentName=\"code\" {...{\n            \"className\": \"token number\"\n          }}>{`30`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`PRINT`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"Good morning\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{` N$\n`}<span parentName=\"code\" {...{\n            \"className\": \"token number\"\n          }}>{`40`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`GOTO`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token number\"\n          }}>{`20`}</span></code></pre></div>\n    <p>{`It was always the same: print the view, ask for new information, and print the result again. A never ended loop.`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"basic\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-basic\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-basic\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`SUB`}</span>{` MainMenu`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`DO`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`CALL`}</span>{` PrintMainMenu\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`INPUT`}</span>{` “What `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`option`}</span>{` you choose? “`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`Option`}</span>{`%\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`CALL`}</span>{` ExecuteMainOption`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`Option`}</span>{`%`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`LOOP`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`UNTIL`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`Option`}</span>{`% `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token number\"\n          }}>{`0`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`END`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`SUB`}</span></code></pre></div>\n    <p>{`It was effortless and quick. When I started to simulate a graphical user interface with windows I always did the same: clear a secondary buffer, print all screens from bottom to top, copy the buffer to the screen, and then input again, waiting for a change.`}</p>\n    <Mermaid mdxType=\"Mermaid\">{`stateDiagram\n  Print: 10 PRINT state\n  Input: 20 INPUT action\n  Input: 30 CALL action\n  Print --> Input\n  Input --> Print\n`}</Mermaid>\n    <h2>{`Entering the Object Oriented world`}</h2>\n    <p>{`Probably I could blame Java for that, but it is not true. The first programming language that I have used was C++, followed closely by VisualBasic (2.0 to be precise).`}</p>\n    <p>{`Object Oriented programming was the coolest thing. I remember the change from simple procedural applications to Object Oriented. Model Objects that take care of themselves. I remember writing one small raytracer in C++, gorgeous. A render engine that took as input abstract Objects, ask them to intersect with rays, and it generated impressive images. Using Object Oriented programming in models was great.`}</p>\n    <p>{`Problems appeared when I started to write interfaces in Object Oriented Programming.`}</p>\n    <Mermaid mdxType=\"Mermaid\">{`classDiagram\n  class Button {\n    +action(ev, ob)\n  }\n  class TextField {\n    +getText()\n  }\n  class Label {\n    +setText(text)\n  }\n`}</Mermaid>\n    <p>{`A view was more complicated than just print, it was creating a complex tree of objects, configurations, and synchronize all of them correctly with the state. However, look at it, interfaces were gorgeous, with complex behaviors, and why not, I was amazed by these shiny buttons.`}</p>\n    <p>{`In those days I did not realize what happened. First I thought that I did not have understood MVC. Later I thought that I needed a better methodology. I sensed that something was wrong, but I did not know what. I began a search for a comfortable way of code. I tried many patterns. Somehow, all solutions always seemed to be a kind of ad-hoc solutions.`}</p>\n    <h2>{`Duplicated states, the root of all evil`}</h2>\n    <p>{`Normalized states, derived states, computed states, single source of truth, and more. There is an extensive list of concepts that explain why you should not have duplicated state. If you duplicate the state, you start working in highly reliable solutions to avoid data corruption.`}</p>\n    <p>{`The main principle of Object Oriented programming is that each object keeps its own state. The only way to interact with that state is through methods. Using one object state from another object is considered an antipattern. In other words: Object Oriented programming encourages you to duplicate states.`}</p>\n    <p>{`That is the problem of Object-Oriented views: each view has its state. That means that your state becomes duplicated: you have the state in your models, and you have the state in the view.`}</p>\n    <p>{`When you have duplicated states, you need to synchronize them. If you look carefully at MVC, it is one proposal about how to implement that synchronization. Unfortunately is not entirely satisfactory; tens of variants have emerged. Almost every project that I have seen implements its unique mechanism and tries to synchronize views and models states, more or less effectively.`}</p>\n    <h2>{`Functions have no state`}</h2>\n    <p>{`In Front End environments it appeared something surprising for me: React. In the beginning, I thought that It was one framework more, but I was wrong.`}</p>\n    <p>{`React conceives the View as something that you can print. A simple React component is a render function. The idea of creating components in React is to allow React lazily call render functions; like a pure-functional programming language.`}</p>\n    <p>{`Think in a view like something that you print from the state, it is simple and powerful. You do not duplicate the state, and everything is always consistent.`}</p>\n    <p>{`Now, any extra code to synchronize application state and view state seems to be superfluous and adds unnecessary overhead and complexity.`}</p>\n    <h2>{`The View is a Function`}</h2>\n    <p>{`Views should not keep state. That duplicates state, and state duplication leads to data corruption and synchronization overheads.`}</p>\n    <p>{`Functions are stateless, predictable, highly reusable. ¿Why do not just print the state to show your view?`}</p>\n    <p>{`The next time that you want to write a new view think about what would happen if you can print that. How easy it becomes when you remove the state from the view.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}